<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.min.js"></script>
  <style>
  ul { margin-left:20px; color:blue; }
  li { cursor:default; font-size: 14}
  li.active { background:black;color:white; }
  body {background-color: MistyRose;}
  span { color:red; }
  </style>

</head>
<body>

<div id='article'></div>
<p id='result'></p>

<p>
  <b>Title:</b>
  <%= @article.title %>
</p>

<p>
  <b>Body:</b><br>
  <%= @article.body %>
</p>

<p>
  <b>Source URL:</b>
  <%= @article.source_url %>
</p>

<p>
  <b>Unique Words:</b>
  <%= @test_body %>
</p>

<%= link_to 'Edit', edit_article_path(@article) %> |
<%= link_to 'Back', articles_path %>

<script>
		$(function () {
			var words = ['所','有'];//'<%= @test_body %>';
			var article = $('#article');
			var len = words.length;
			for (var i = 0; i < words.length; i++){
				var node = $('<div>')
				.addClass('node')
				.html(words[i]);
				article.append(node);
			}

			$('div.node').mouseup(function() {
			   var ele = $(this).html();//window.getSelection();
			    $.ajax({
			    	url:"http://glacial-badlands-7296.herokuapp.com/click",
			    	success:function(data){
			      		$("p#result").append('success');
			      		console.log(data);},
			      	data: { 'char':ele },
			      	error:function(data){alert('error sending');
			      		console.log(data);}
				});
			});
		});

</script>



</body>
</html>
